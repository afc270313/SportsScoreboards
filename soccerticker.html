<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Live Football Scores Ticker</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      background: #000;
      color: #fff;
      font-family: sans-serif;
      overflow: hidden; /* Prevent scrollbars on the body */
    }

    #ticker-container {
      background: #000;
      color: #fff;
      padding: 10px;
      height: 50px; /* Set a fixed height */
      overflow: hidden; /* Hide both scrollbars */
      white-space: nowrap;
      position: relative;
      width: 100%;
      box-sizing: border-box;
    }

    #ticker {
      display: inline-block;
      position: absolute;
      left: 100%;
      white-space: nowrap;
    }

    .league-title {
      color: #ffd700;
      font-weight: bold;
      margin-right: 30px;
    }

    .match-info {
      margin-right: 40px;
    }

    .no-scores {
      color: #ccc;
    }
  </style>
</head>
<body>
  <div id="ticker-container">
    <div id="ticker"></div>
  </div>

  <script>
    const ticker = document.getElementById('ticker');
    const container = document.getElementById('ticker-container');

    const targetLeagues = [
      "English Premier League",
      "Scottish Premier League",
      "German Bundesliga",
      "Italian Serie A",
      "French Ligue 1",
      "Spanish La Liga",
      "Brazilian Serie A",
      "FIFA World Cup",
      "UEFA Champions League",
      "UEFA Europa League",
      "FA Cup",
      "Copa del Rey",
      "UEFA Nations League",
      "Copa Libertadores",
      "UEFA European Championships",
      "Scottish FA Cup",
      "Copa do Brasil",
      "UEFA Conference League"
    ];

    function loadScores() {
      fetch('https://sportsscore.afc270313.workers.dev/')
        .then(r => r.json())
        .then(data => {
          const matches = data.livescore || [];
          const leagues = {};

          matches.forEach(m => {
            const league = m.strLeague || 'Other';
            if (targetLeagues.includes(league)) {
              if (!leagues[league]) leagues[league] = [];
              leagues[league].push(m);
            }
          });

          const sorted = targetLeagues.filter(l => leagues[l]);
          let html = '';

          sorted.forEach(league => {
            html += `<span class="league-title">üèÜ ${league}</span>`;
            leagues[league].forEach(m => {
              html += `<span class="match-info">${m.strHomeTeam} ${m.intHomeScore} - ${m.intAwayScore} ${m.strAwayTeam} (${m.strProgress})</span>`;
            });
          });

          if (html === '') {
            html = '<span class="no-scores">‚öΩ No live scores for selected leagues.</span>';
          }

          ticker.innerHTML = html;
          startTicker();
        })
        .catch(err => {
          ticker.innerHTML = '<span style="color:#f00;">‚ö†Ô∏è Failed to load scores.</span>';
          console.error('Error loading scores:', err);
        });
    }

    function startTicker() {
      ticker.style.left = '100%';
      const totalWidth = ticker.offsetWidth;
      const containerWidth = container.offsetWidth;

      if (totalWidth <= containerWidth) {
        ticker.style.left = '0';
        return;
      }

      let start = null;
      const duration = 60000;

      function step(ts) {
        if (!start) start = ts;
        const progress = ts - start;
        const percent = progress / duration;
        const scrollDistance = totalWidth + containerWidth;
        ticker.style.left = `${100 - percent * scrollDistance / containerWidth * 100}%`;

        if (percent < 1) {
          requestAnimationFrame(step);
        } else {
          startTicker();
        }
      }

      requestAnimationFrame(step);
    }

    loadScores();
    setInterval(loadScores, 120000);
  </script>
</body>
</html>
